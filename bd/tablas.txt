CREATE TABLE paises (id_pais INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,nombre TEXT NOT NULL,prefijo INTEGER NOT NULL DEFAULT (52));
CREATE TABLE cp (id_cp INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,cp INTEGER NOT NULL,colonia TEXT NOT NULL,ciudad TEXT NOT NULL,estado TEXT NOT NULL,id_pais INTEGER NOT NULL, FOREIGN KEY (id_pais) REFERENCES paises (id_pais) ON DELETE CASCADE ON UPDATE CASCADE);
CREATE TABLE direcciones (id_direccion INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,calle TEXT NOT NULL,no_exterior INTEGER NOT NULL,no_interior TEXT NOT NULL,id_cp INTEGER NOT NULL,FOREIGN KEY (id_cp) REFERENCES cp (id_cp) ON DELETE CASCADE ON UPDATE CASCADE);
CREATE TABLE servicios (id_servicio INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,tipo_servicio TEXT NOT NULL,costo REAL NOT NULL,detalles TEXT DEFAULT NULL,titulo TEXT NOT NULL,comision REAL NOT NULL,fecha_inicio date NOT NULL,fecha_final date DEFAULT NULL,restricciones TEXT DEFAULT NULL,subtipo TEXT DEFAULT NULL,ciudad TEXT DEFAULT NULL,estado TEXT DEFAULT NULL,pais TEXT DEFAULT NULL);
CREATE TABLE clientes (id_cliente INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, nombre TEXT NOT NULL,ap_pat TEXT NOT NULL, ap_mat TEXT NOT NULL,curp TEXT NOT NULL,telefono TEXT NOT NULL,nom_empresa TEXT NOT NULL, id_direccion INTEGER NOT NULL,correo TEXT DEFAULT NULL,FOREIGN KEY (id_direccion) REFERENCES direcciones (id_direccion) ON DELETE CASCADE ON UPDATE CASCADE);
CREATE TABLE empleados (id_empleado INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,nombre TEXT NOT NULL,ap_pat TEXT NOT NULL,ap_mat TEXT NOT NULL,curp TEXT NOT NULL,NSS INTEGER NOT NULL,telefono TEXT NOT NULL,id_direccion INTEGER NOT NULL,puesto TEXT NOT NULL,acceso INTEGER NOT NULL,correo TEXT NOT NULL,contrasena TEXT NOT NULL,sueldo REAL NOT NULL,comision REAL NOT NULL,fecha_inicio date NOT NULL,fecha_final date DEFAULT NULL,estatus TEXT NOT NULL DEFAULT ('activo'),FOREIGN KEY (id_direccion) REFERENCES direcciones (id_direccion) ON DELETE CASCADE ON UPDATE CASCADE);
CREATE TABLE prospectos (id_prospecto INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,empresa TEXT NOT NULL,telefono TEXT NOT NULL,nombre TEXT NOT NULL,descripcion TEXT DEFAULT NULL,id_direccion INTEGER NOT NULL,correo TEXT DEFAULT NULL,ap_pat TEXT DEFAULT NULL,ap_mat TEXT DEFAULT NULL,FOREIGN KEY (id_direccion) REFERENCES direcciones (id_direccion) ON DELETE CASCADE ON UPDATE CASCADE);
CREATE TABLE facturas (id_factura INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, id_empleado INTEGER NOT NULL,id_cliente INTEGER NOT NULL,fecha date NOT NULL,total REAL NOT NULL,status TEXT NOT NULL,FOREIGN KEY (id_empleado) REFERENCES empleados (id_empleado) ON DELETE CASCADE ON UPDATE CASCADE,FOREIGN KEY (id_cliente) REFERENCES clientes (id_cliente) ON DELETE CASCADE ON UPDATE CASCADE);
CREATE TABLE ventas (id_venta INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,id_servicio INTEGER NOT NULL,id_factura INTEGER NOT NULL,FOREIGN KEY (id_servicio) REFERENCES servicios (id_servicio) ON DELETE CASCADE ON UPDATE CASCADE,FOREIGN KEY (id_factura) REFERENCES facturas (id_factura) ON DELETE CASCADE ON UPDATE CASCADE);
